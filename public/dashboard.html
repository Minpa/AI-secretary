<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Secretary - ëŒ€ì‹œë³´ë“œ</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="gradient-bg shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="/" class="text-white text-xl font-bold">AI Secretary</a>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/" class="text-white hover:text-gray-200 px-3 py-2 rounded-md">í™ˆ</a>
                    <a href="/dashboard.html" class="text-white bg-blue-700 px-3 py-2 rounded-md">ëŒ€ì‹œë³´ë“œ</a>
                    <a href="/reports.html" class="text-white hover:text-gray-200 px-3 py-2 rounded-md">ë¦¬í¬íŠ¸</a>
                    <a href="/workload.html" class="text-white hover:text-gray-200 px-3 py-2 rounded-md">ì—…ë¬´ ë¶„ë‹´</a>
                    <a href="/test.html" class="text-white hover:text-gray-200 px-3 py-2 rounded-md">í…ŒìŠ¤íŠ¸</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900">ìš´ì˜ ëŒ€ì‹œë³´ë“œ</h1>
            <p class="mt-2 text-gray-600">ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ í˜„í™© ë° í†µê³„</p>
            <button id="refreshBtn" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mr-2">
                ë°ì´í„° ìƒˆë¡œê³ ì¹¨
            </button>
            <button id="testApiBtn" class="mt-4 bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 mr-2">
                API í…ŒìŠ¤íŠ¸
            </button>
            <a href="/reports" class="mt-4 bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 inline-block">
                ğŸ“Š ìƒì„¸ ë¦¬í¬íŠ¸
            </a>
            <div id="apiTestResult" class="mt-4 hidden"></div>
        </div>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center">
                                <span class="text-white text-sm">ğŸ“¨</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">ì´ ì ‘ìˆ˜</dt>
                                <dd class="text-lg font-medium text-gray-900" id="totalMessages">-</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-green-500 rounded-md flex items-center justify-center">
                                <span class="text-white text-sm">ğŸ«</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">í™œì„± í‹°ì¼“</dt>
                                <dd class="text-lg font-medium text-gray-900" id="activeTickets">-</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center">
                                <span class="text-white text-sm">â°</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">SLA ì¤€ìˆ˜ìœ¨</dt>
                                <dd class="text-lg font-medium text-gray-900" id="slaCompliance">-</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-red-500 rounded-md flex items-center justify-center">
                                <span class="text-white text-sm">âš ï¸</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">ìœ„í—˜ ì ìˆ˜</dt>
                                <dd class="text-lg font-medium text-gray-900" id="riskScore">-</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Messages -->
        <div class="bg-white shadow rounded-lg mb-8">
            <div class="px-4 py-5 sm:p-6">
                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">ìµœê·¼ ì ‘ìˆ˜ ë©”ì‹œì§€</h3>
                <div class="overflow-hidden">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì±„ë„</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ë‚´ìš©</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìš°ì„ ìˆœìœ„</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìƒíƒœ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‹œê°„</th>
                            </tr>
                        </thead>
                        <tbody id="recentMessages" class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td colspan="5" class="px-6 py-4 text-center text-gray-500">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Recent Tickets -->
        <div class="bg-white shadow rounded-lg mb-8">
            <div class="px-4 py-5 sm:p-6">
                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">ìµœê·¼ ìƒì„±ëœ í‹°ì¼“</h3>
                <div class="overflow-hidden">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">í‹°ì¼“ë²ˆí˜¸</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì œëª©</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìš°ì„ ìˆœìœ„</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìƒíƒœ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">SLA ë§ˆê°</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‘ì—…</th>
                            </tr>
                        </thead>
                        <tbody id="recentTickets" class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td colspan="5" class="px-6 py-4 text-center text-gray-500">í‹°ì¼“ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- API Endpoints -->
        <div class="bg-white shadow rounded-lg">
            <div class="px-4 py-5 sm:p-6">
                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">API ì—”ë“œí¬ì¸íŠ¸ ìƒíƒœ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="border rounded-lg p-4">
                        <h4 class="font-medium text-gray-900">Intake Hub</h4>
                        <p class="text-sm text-gray-500 mt-1">ë‹¤ì±„ë„ ë©”ì‹œì§€ ì ‘ìˆ˜</p>
                        <div class="mt-2">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                í™œì„±
                            </span>
                        </div>
                    </div>
                    
                    <div class="border rounded-lg p-4">
                        <h4 class="font-medium text-gray-900">Ticketing</h4>
                        <p class="text-sm text-gray-500 mt-1">í‹°ì¼“ ê´€ë¦¬ ì‹œìŠ¤í…œ</p>
                        <div class="mt-2">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                í™œì„±
                            </span>
                        </div>
                    </div>
                    
                    <div class="border rounded-lg p-4">
                        <h4 class="font-medium text-gray-900">Reports</h4>
                        <p class="text-sm text-gray-500 mt-1">ë¦¬í¬íŠ¸ ìƒì„±</p>
                        <div class="mt-2">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                í™œì„±
                            </span>
                        </div>
                    </div>
                    
                    <div class="border rounded-lg p-4">
                        <h4 class="font-medium text-gray-900">Risk Brief</h4>
                        <p class="text-sm text-gray-500 mt-1">ìœ„í—˜ ë¶„ì„</p>
                        <div class="mt-2">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                í™œì„±
                            </span>
                        </div>
                    </div>
                    
                    <div class="border rounded-lg p-4">
                        <h4 class="font-medium text-gray-900">ERP Reader</h4>
                        <p class="text-sm text-gray-500 mt-1">ERP ë°ì´í„° ì—°ë™</p>
                        <div class="mt-2">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                í™œì„±
                            </span>
                        </div>
                    </div>
                    
                    <div class="border rounded-lg p-4">
                        <h4 class="font-medium text-gray-900">Admin</h4>
                        <p class="text-sm text-gray-500 mt-1">ì‚¬ìš©ì ê´€ë¦¬</p>
                        <div class="mt-2">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                í™œì„±
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Load dashboard data
        async function loadDashboardData() {
            try {
                console.log('Loading dashboard data...');
                // Load intake stats
                const intakeResponse = await fetch('/api/intake/stats');
                console.log('Intake response status:', intakeResponse.status);
                if (intakeResponse.ok) {
                    const intakeData = await intakeResponse.json();
                    console.log('Intake data:', intakeData);
                    if (intakeData.success) {
                        document.getElementById('totalMessages').textContent = intakeData.data.totalMessages || '0';
                        
                        // Update recent messages table
                        const messagesTable = document.getElementById('recentMessages');
                        const messages = intakeData.data.recentMessages || [];
                        console.log('Messages found:', messages.length);
                        
                        if (messages.length === 0) {
                            messagesTable.innerHTML = `
                                <tr>
                                    <td colspan="5" class="px-6 py-4 text-center text-gray-500">
                                        ì•„ì§ ì ‘ìˆ˜ëœ ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤. <a href="/test" class="text-blue-600 hover:text-blue-800">í…ŒìŠ¤íŠ¸ í˜ì´ì§€</a>ì—ì„œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•´ë³´ì„¸ìš”.
                                    </td>
                                </tr>
                            `;
                        } else {
                            messagesTable.innerHTML = messages.map(message => {
                                const channelEmoji = {
                                    'sms': 'ğŸ“±',
                                    'email': 'ğŸ“§',
                                    'web': 'ğŸŒ',
                                    'call': 'ğŸ“'
                                };
                                
                                const priorityColor = {
                                    'urgent': 'bg-red-100 text-red-800',
                                    'high': 'bg-orange-100 text-orange-800',
                                    'medium': 'bg-yellow-100 text-yellow-800',
                                    'low': 'bg-green-100 text-green-800'
                                };
                                
                                const statusColor = {
                                    'pending': 'bg-gray-100 text-gray-800',
                                    'classified': 'bg-blue-100 text-blue-800',
                                    'assigned': 'bg-purple-100 text-purple-800',
                                    'processed': 'bg-green-100 text-green-800'
                                };

                                const statusLabels = {
                                    'pending': 'ëŒ€ê¸°ì¤‘',
                                    'classified': 'ë¶„ë¥˜ì™„ë£Œ',
                                    'assigned': 'í• ë‹¹ë¨',
                                    'processed': 'ì²˜ë¦¬ì™„ë£Œ'
                                };
                                
                                return `
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                            ${channelEmoji[message.channel] || 'ğŸ“'} ${message.channel.toUpperCase()}
                                        </td>
                                        <td class="px-6 py-4 text-sm text-gray-900 max-w-xs truncate">
                                            ${message.maskedContent || message.content}
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${priorityColor[message.priority] || 'bg-gray-100 text-gray-800'}">
                                                ${message.priority}
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex flex-col space-y-2">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusColor[message.status] || 'bg-gray-100 text-gray-800'}">
                                                    ${statusLabels[message.status] || message.status}
                                                </span>
                                                <div class="flex space-x-1">
                                                    <input type="radio" id="pending_${message.id}" name="status_${message.id}" value="pending" 
                                                           ${message.status === 'pending' ? 'checked' : ''} 
                                                           onchange="updateMessageStatus('${message.id}', 'pending')" class="text-xs">
                                                    <label for="pending_${message.id}" class="text-xs text-gray-600">ëŒ€ê¸°</label>
                                                </div>
                                                <div class="flex space-x-1">
                                                    <input type="radio" id="classified_${message.id}" name="status_${message.id}" value="classified" 
                                                           ${message.status === 'classified' ? 'checked' : ''} 
                                                           onchange="updateMessageStatus('${message.id}', 'classified')" class="text-xs">
                                                    <label for="classified_${message.id}" class="text-xs text-gray-600">ë¶„ë¥˜</label>
                                                </div>
                                                <div class="flex space-x-1">
                                                    <input type="radio" id="assigned_${message.id}" name="status_${message.id}" value="assigned" 
                                                           ${message.status === 'assigned' ? 'checked' : ''} 
                                                           onchange="updateMessageStatus('${message.id}', 'assigned')" class="text-xs">
                                                    <label for="assigned_${message.id}" class="text-xs text-gray-600">í• ë‹¹</label>
                                                </div>
                                                <div class="flex space-x-1">
                                                    <input type="radio" id="processed_${message.id}" name="status_${message.id}" value="processed" 
                                                           ${message.status === 'processed' ? 'checked' : ''} 
                                                           onchange="updateMessageStatus('${message.id}', 'processed')" class="text-xs">
                                                    <label for="processed_${message.id}" class="text-xs text-gray-600">ì™„ë£Œ</label>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            ${new Date(message.createdAt).toLocaleString('ko-KR')}
                                        </td>
                                    </tr>
                                `;
                            }).join('');
                        }
                    }
                }

                // Load SLA dashboard
                const slaResponse = await fetch('/api/tickets/sla/dashboard');
                if (slaResponse.ok) {
                    const slaData = await slaResponse.json();
                    if (slaData.success) {
                        document.getElementById('activeTickets').textContent = slaData.data.totalTickets || '0';
                        document.getElementById('slaCompliance').textContent = (slaData.data.slaPerformance || 0).toFixed(1) + '%';
                    }
                }

                // Load recent tickets
                const ticketsResponse = await fetch('/api/tickets?limit=10');
                if (ticketsResponse.ok) {
                    const ticketsData = await ticketsResponse.json();
                    if (ticketsData.success) {
                        const ticketsTable = document.getElementById('recentTickets');
                        const tickets = ticketsData.data || [];
                        
                        if (tickets.length === 0) {
                            ticketsTable.innerHTML = `
                                <tr>
                                    <td colspan="6" class="px-6 py-4 text-center text-gray-500">
                                        ì•„ì§ ìƒì„±ëœ í‹°ì¼“ì´ ì—†ìŠµë‹ˆë‹¤. ë©”ì‹œì§€ë¥¼ ë¶„ë¥˜í•˜ë©´ ìë™ìœ¼ë¡œ í‹°ì¼“ì´ ìƒì„±ë©ë‹ˆë‹¤.
                                    </td>
                                </tr>
                            `;
                        } else {
                            const priorityColor = {
                                'urgent': 'bg-red-100 text-red-800',
                                'high': 'bg-orange-100 text-orange-800',
                                'medium': 'bg-yellow-100 text-yellow-800',
                                'low': 'bg-green-100 text-green-800'
                            };
                            
                            const statusColor = {
                                'open': 'bg-blue-100 text-blue-800',
                                'in_progress': 'bg-purple-100 text-purple-800',
                                'pending': 'bg-yellow-100 text-yellow-800',
                                'resolved': 'bg-green-100 text-green-800',
                                'closed': 'bg-gray-100 text-gray-800'
                            };

                            const statusLabels = {
                                'open': 'ì—´ë¦¼',
                                'in_progress': 'ì§„í–‰ì¤‘',
                                'pending': 'ëŒ€ê¸°',
                                'resolved': 'í•´ê²°ë¨',
                                'closed': 'ë‹«í˜'
                            };
                            
                            ticketsTable.innerHTML = tickets.map(ticket => {
                                const slaDeadline = new Date(ticket.slaDeadline);
                                const now = new Date();
                                const isOverdue = now > slaDeadline;
                                
                                return `
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                            <a href="/ticket-detail?id=${ticket.id}" class="text-indigo-600 hover:text-indigo-900">
                                                ${ticket.number}
                                            </a>
                                        </td>
                                        <td class="px-6 py-4 text-sm text-gray-900 max-w-xs truncate">
                                            <a href="/ticket-detail?id=${ticket.id}" class="text-gray-900 hover:text-indigo-600">
                                                ${ticket.title}
                                            </a>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${priorityColor[ticket.priority] || 'bg-gray-100 text-gray-800'}">
                                                ${ticket.priority}
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusColor[ticket.status] || 'bg-gray-100 text-gray-800'}">
                                                ${statusLabels[ticket.status] || ticket.status}
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm ${isOverdue ? 'text-red-600 font-medium' : 'text-gray-500'}">
                                            ${slaDeadline.toLocaleString('ko-KR')}
                                            ${isOverdue ? ' (ì§€ì—°)' : ''}
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="/ticket-detail?id=${ticket.id}" class="text-indigo-600 hover:text-indigo-900">
                                                ìƒì„¸ë³´ê¸°
                                            </a>
                                        </td>
                                    </tr>
                                `;
                            }).join('');
                        }
                    }
                }

                // Load risk dashboard
                const riskResponse = await fetch('/api/risk/dashboard');
                if (riskResponse.ok) {
                    const riskData = await riskResponse.json();
                    if (riskData.success) {
                        document.getElementById('riskScore').textContent = riskData.data.riskScore || '0';
                    }
                }

            } catch (error) {
                console.error('Error loading dashboard data:', error);
            }
        }

        // Load data on page load
        document.addEventListener('DOMContentLoaded', loadDashboardData);

        // Manual refresh button
        document.getElementById('refreshBtn').addEventListener('click', loadDashboardData);

        // API test button
        document.getElementById('testApiBtn').addEventListener('click', async () => {
            try {
                const response = await fetch('/api/intake/test');
                const data = await response.json();
                const resultDiv = document.getElementById('apiTestResult');
                resultDiv.className = 'mt-4 p-4 bg-green-50 border border-green-200 rounded-md';
                resultDiv.innerHTML = `<pre class="text-sm text-green-800">${JSON.stringify(data, null, 2)}</pre>`;
                resultDiv.classList.remove('hidden');
                
                // Also test stats endpoint
                const statsResponse = await fetch('/api/intake/stats');
                const statsData = await statsResponse.json();
                resultDiv.innerHTML += `<hr class="my-2"><pre class="text-sm text-green-800">${JSON.stringify(statsData, null, 2)}</pre>`;
            } catch (error) {
                const resultDiv = document.getElementById('apiTestResult');
                resultDiv.className = 'mt-4 p-4 bg-red-50 border border-red-200 rounded-md';
                resultDiv.innerHTML = `<pre class="text-sm text-red-800">Error: ${error.message}</pre>`;
                resultDiv.classList.remove('hidden');
            }
        });

        // Update message status function
        async function updateMessageStatus(messageId, newStatus) {
            try {
                console.log('Updating message status:', messageId, newStatus);
                const response = await fetch(`/api/intake/messages/${messageId}/status`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ status: newStatus })
                });

                if (response.ok) {
                    const result = await response.json();
                    console.log('Status updated successfully:', result);
                    // Refresh the dashboard to show updated status
                    loadDashboardData();
                } else {
                    console.error('Failed to update status:', response.status);
                    alert('ìƒíƒœ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('Error updating status:', error);
                alert('ìƒíƒœ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // Refresh data every 30 seconds
        setInterval(loadDashboardData, 30000);
    </script>
</body>
</html>